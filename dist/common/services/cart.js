System.registerDynamic("common/services/cart.js",["angular","lodash/find"],!0,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(b,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("angular"),h=d(g),i=a("lodash/find"),j=d(i),k=function(){function a(){e(this,a),this.items=[],this.callbacks=[]}return f(a,[{key:"add",value:function(a){this.items.some(function(b){return b.name===a.name})||this.items.push(a),this.calcPrice(a),this.fireCallbacks(this.items)}},{key:"remove",value:function(a){var b=(0,j.default)(this.items,function(b){return b.name===a.name});if(this.calcPrice(b,-1),b._remove){var c=this.items.indexOf(b);this.items.splice(c,1)}this.fireCallbacks(this.items)}},{key:"calcPrice",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.count=null!=a.count?a.count+b:1,a.totalPrice=a.price*a.count}},{key:"clear",value:function(){this.items=[],this.fireCallbacks(this.items)}},{key:"listen",value:function(a){this.callbacks.push({func:a})}},{key:"fireCallbacks",value:function(a){this.callbacks.forEach(function(b){return b.func(a)})}}]),a}();return b.default=h.default.module("cart",[]).service("Cart",k),c.exports});